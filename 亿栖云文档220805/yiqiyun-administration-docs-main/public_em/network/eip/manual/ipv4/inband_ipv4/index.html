<!doctype html>
<html lang="zh" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta name="generator" content="Hugo 0.101.0" />

<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">



<link rel="icon" href="http://yiqiyun.sd.cegn.cn/static/assets/images/favicon.ico?v=1632342842" type="image/x-icon">

<title>内部绑定公网 IP | 亿栖云文档</title>

<link href="/css/bulma.css" rel="stylesheet">
<link href="/css/autocomplete.css" rel="stylesheet" />
<link href="/css/copy-to-clipboard.css" rel="stylesheet" />


    



<link rel="preload" href="/scss/console.min.3968935d0a1c8815d0609e047c8c7bddc7781a37538ed1b0cc049f82a7c994c1.css" as="style">
<link href="/scss/console.min.3968935d0a1c8815d0609e047c8c7bddc7781a37538ed1b0cc049f82a7c994c1.css" rel="stylesheet" integrity="">


<script
  src="/js/jquery-2.2.4.js?v=1510299508"
  ></script>
	

<script src="/js/common.js?v=1.3"></script>

  </head>
  <body class="td-page">
    <header>
      <div class="nav-wrapper ">
  <nav class="navbar navmenu"  style="display:none;" >
    <div class="container with-no-position doc-container-width ">
      <div class="navbar-brand" id="search-mobile-logo">
        <a class="navbar-item logo" href="http://www.yiqiyun.net.cn">
          <img src="/images/yiqiyun_logo.png" alt="logo" style="height: 32px;width: 120px;">
        </a>
      </div>
      <div class="media-content column is-centered is-5 search-mobile">
        <form action="/search" method="GET">
          <div class="control has-icons-right docs-search-input">
            <input class="input" id="search-bar" name="q" type="search" placeholder="搜索" autocomplete="off">
            <span class="icon is-right" id="mobile-search">
              <img src="/images/icons/search.svg">
            </span>
          </div>
        </form>
        <a href="javascript:;" class="search-mobile-icon"><img src="/images/icons/search.svg"></a>
      </div>
      <div class="navbar-end is-hidden-mobile header-account">
        <div class="navbar-item">
          <div class="field is-grouped">
            <p class="control navbar-user">
              <a class="nav-item" href="http://www.yiqiyun.cn">服务商门户</a>
            </p>
            <p class="control navbar-user">
              <a class="nav-item" href="http://console.yiqiyun.cn/login">登录</a>
            </p>
            <div class="navbar-user">
              <a class="button is-primary j-signup" href="http://console.yiqiyun.cn/signup/" data-gio="{id:'createPageView',var:{sourceType_var:'导航栏'}}" style="background-color: #55a8fd">注册</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </nav>
  
  <nav class="navbar navmenu navbar-index">
    <div class="container is-size-7 doc-container-width " data-path="1">


	
	
		

  
  

  
  

  
  

  
  

  


	
	




  


	
	
	<a href="/network/eip/" class="has-text-primary">公网 IP</a><img class="container_span_space" src="/images/icons/path.svg">
	




  


	
	
	<a href="/network/eip/manual/" class="has-text-primary">操作指南</a><img class="container_span_space" src="/images/icons/path.svg">
	




  


	
	
	<a href="" class="has-text-primary">绑定 IPv4 公网 IP</a><img class="container_span_space" src="/images/icons/path.svg">
	




  



	
	<span class="crumb-last-color">详情</span>
	



	

</div>


  </nav>
  
</div>
    </header>
    <div class="container td-outer doc-container-width container-min-height">
      <div class="td-main">
		
			<h1 class="console-tree-title">绑定 IPv4 公网 IP</h1>
		
        <div class="row flex-xl-nowrap">
		  
          <div class="col-12 col-md-3 col-xl-3 td-sidebar d-print-none td-sidebar-menu">
            





<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <nav class="collapse td-sidebar-nav pt-2" id="td-section-nav">
    <div class="nav-item dropdown d-block ">
      
      
      













<span class="menu__title--collapse  display-hide"
  data-depth="0">
  VPC 网络
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list  "
  data-data=/vpc/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  













<span class="menu__title--collapse  "
  data-depth="1">
  产品简介
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list "
  data-data=/intro/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  
  
  
  <li>
    <a href="/network/vpc/intro/10_intro/"
      class="menu__title  "
      data-depth="1">VPC 网络简介</a>
  </li>
  
  
</ul>


  
  
  
  













<span class="menu__title--collapse  "
  data-depth="1">
  计费指南
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list "
  data-data=/billing/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  
  
  
  <li>
    <a href="/network/vpc/billing/price/"
      class="menu__title  "
      data-depth="1">VPC 网络计费</a>
  </li>
  
  
</ul>


  
  
  
  













<span class="menu__title--collapse  "
  data-depth="1">
  快速入门
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list "
  data-data=/quick-start/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  
  
  
  <li>
    <a href="/network/vpc/quick-start/10_qs_net_plan/"
      class="menu__title  "
      data-depth="1">网络规划</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/vpc/quick-start/20_qs_ipv4/"
      class="menu__title  "
      data-depth="1">搭建 IPv4 VPC 网络</a>
  </li>
  
  
</ul>


  
  
  
  













<span class="menu__title--collapse active "
  data-depth="1">
  操作指南
  <span
    class="menu__title--icon down">

  </span>
</span>
<ul class="menu__list active"
  data-data=/manual/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  













<span class="menu__title--collapse  "
  data-depth="2">
  VPC网络
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list "
  data-data=/vpcnet/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  
  
  
  <li>
    <a href="/network/vpc/manual/vpcnet/10_create_vpc/"
      class="menu__title  "
      data-depth="2">创建 VPC 网络</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/vpc/manual/vpcnet/15_bind_vxnet/"
      class="menu__title  "
      data-depth="2">连接私有网络</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/vpc/manual/vpcnet/20_modify_vpc/"
      class="menu__title  "
      data-depth="2">修改 VPC 基本信息</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/vpc/manual/vpcnet/25_mdy_type/"
      class="menu__title  "
      data-depth="2">修改 VPC 规格类型</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/vpc/manual/vpcnet/26_bind_eip/"
      class="menu__title  "
      data-depth="2">绑定公网 IP</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/vpc/manual/vpcnet/35_del_vpc/"
      class="menu__title  "
      data-depth="2">删除 VPC 网络</a>
  </li>
  
  
</ul>


  
  
  
  













<span class="menu__title--collapse  "
  data-depth="2">
  私有网络
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list "
  data-data=/vxnet/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  
  
  
  <li>
    <a href="/network/vpc/manual/vxnet/05_create_vxnet/"
      class="menu__title  "
      data-depth="2">创建私有网络</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/vpc/manual/vxnet/08_addto_vpc/"
      class="menu__title  "
      data-depth="2">加入 VPC 网络</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/vpc/manual/vxnet/10_mdfy_vxnet/"
      class="menu__title  "
      data-depth="2">修改私有网络基本信息</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/vpc/manual/vxnet/20_add_resource/"
      class="menu__title  "
      data-depth="2">在私有网络中创建资源</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/vpc/manual/vxnet/25_bind_acl/"
      class="menu__title  "
      data-depth="2">绑定网络 ACL</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/vpc/manual/vxnet/30_bind_route/"
      class="menu__title  "
      data-depth="2">绑定路由表</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/vpc/manual/vxnet/31_leave_vpc/"
      class="menu__title  "
      data-depth="2">离开 VPC 网络</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/vpc/manual/vxnet/32_del_vxnet/"
      class="menu__title  "
      data-depth="2">删除私有网络</a>
  </li>
  
  
</ul>


  
  
  
  
  
  
  <li>
    <a href="/network/vpc/manual/30_fig_manage/"
      class="menu__title  "
      data-depth="1">图形化操作</a>
  </li>
  
  
  
  













<span class="menu__title--collapse  "
  data-depth="2">
  隧道服务
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list  "
  data-data=/tunnel/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  
  
  
  <li>
    <a href="/network/vpc/manual/tunnel/gre/"
      class="menu__title  "
      data-depth="2">GRE 隧道</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/vpc/manual/tunnel/ipsec/"
      class="menu__title  "
      data-depth="2">IPsec 隧道</a>
  </li>
  
  
</ul>


  
  
  
  
  
  
  <li>
    <a href="/network/vpc/manual/vpn/"
      class="menu__title  "
      data-depth="1">VPN 服务</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/vpc/manual/route_table/"
      class="menu__title  "
      data-depth="1">使用路由表</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/vpc/manual/virtual_ip/"
      class="menu__title  "
      data-depth="1">使用虚拟 IP </a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/vpc/manual/span/"
      class="menu__title  "
      data-depth="1">管理网络流量镜像</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/vpc/manual/vpc_acl/"
      class="menu__title  "
      data-depth="1">网关过滤控制(ACL)</a>
  </li>
  
  
</ul>


  
  
  
  













<span class="menu__title--collapse  "
  data-depth="1">
  最佳实践
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list "
  data-data=/best-practices/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  
  
  
  <li>
    <a href="/network/vpc/best-practices/building_tunnel_with_strongswan_and_vpc/"
      class="menu__title  "
      data-depth="1">strongswan与VPC共同搭建隧道</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/vpc/best-practices/win_multi_vpcs/"
      class="menu__title  more-space"
      data-depth="1">Windows客户端拨入VPN实现跨多个VPC之间的内网互通</a>
  </li>
  
  
</ul>


  
  
  
  













<span class="menu__title--collapse  "
  data-depth="1">
  常见问题
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list "
  data-data=/faq/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  
  
  
  <li>
    <a href="/network/vpc/faq/how_to_configure_pptp_vpn_for_windows_host/"
      class="menu__title  "
      data-depth="1">Windows 云服务器中配置PPTP VPN</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/vpc/faq/how_to_use_public_network_dns_forwarding/"
      class="menu__title  "
      data-depth="1">公网 DNS 转发如何使用</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/vpc/faq/vpc_faq/"
      class="menu__title  "
      data-depth="1">何种情况下需要手动配置网络</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/vpc/faq/network_between_vms/"
      class="menu__title  "
      data-depth="1">VPC中云服务器之间网络不通</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/vpc/faq/openvpn_dns_push/"
      class="menu__title  more-space"
      data-depth="1">OpenVPN 客户端启用服务端推送的 DNS 配置</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/vpc/faq/openvpn_add_virtual_network_adapter/"
      class="menu__title  "
      data-depth="1">OpenVPN添加虚拟网卡</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/vpc/faq/methods_of_port_forwarding/"
      class="menu__title  "
      data-depth="1">使用端口转发功能</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/vpc/faq/intranet_dns_guide/"
      class="menu__title  "
      data-depth="1">使用内网DNS功能</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/vpc/faq/openvpn_building_linux/"
      class="menu__title  "
      data-depth="1">在Linux客户端中配置OpenVPN</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/vpc/faq/openvpn_building/"
      class="menu__title  "
      data-depth="1">在Windows客户端中配置OpenVPN</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/vpc/faq/ptr/"
      class="menu__title  "
      data-depth="1">关闭/开启 PTR</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/vpc/faq/iso_l2tp/"
      class="menu__title  "
      data-depth="1">IOS 客户端如何连接L2TP-IPsecVPN？</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/vpc/faq/mac_openvpn_client/"
      class="menu__title  "
      data-depth="1">OpenVPN Mac 客户端使用方法</a>
  </li>
  
  
</ul>


  
  
</ul>


      
      













<span class="menu__title--collapse  display-hide"
  data-depth="0">
  NAT 网关
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list  "
  data-data=/nat_gateway/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  













<span class="menu__title--collapse  "
  data-depth="1">
  动态与公告
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list "
  data-data=/news/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  
  
  
  <li>
    <a href="/network/nat_gateway/news/prodoct_news/"
      class="menu__title  "
      data-depth="1">产品动态</a>
  </li>
  
  
</ul>


  
  
  
  













<span class="menu__title--collapse  "
  data-depth="1">
  产品简介
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list "
  data-data=/intro/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  
  
  
  <li>
    <a href="/network/nat_gateway/intro/nat_gateway/"
      class="menu__title  "
      data-depth="1">NAT 网关简介</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/nat_gateway/intro/net_quota/"
      class="menu__title  "
      data-depth="1">绑定私有网络限制</a>
  </li>
  
  
</ul>


  
  
  
  













<span class="menu__title--collapse active "
  data-depth="1">
  操作指南
  <span
    class="menu__title--icon down">

  </span>
</span>
<ul class="menu__list active"
  data-data=/manual/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  
  
  
  <li>
    <a href="/network/nat_gateway/manual/nat_user_guide/"
      class="menu__title  "
      data-depth="1">操作指南</a>
  </li>
  
  
</ul>


  
  
  
  













<span class="menu__title--collapse  "
  data-depth="1">
  最佳实践
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list "
  data-data=/best-practices/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  
  
  
  <li>
    <a href="/network/nat_gateway/best-practices/nat_and_vpc/"
      class="menu__title  "
      data-depth="1">NAT 网关配合 VPC 使用</a>
  </li>
  
  
</ul>


  
  
</ul>


      
      













<span class="menu__title--collapse active display-hide"
  data-depth="0">
  公网 IP
  <span
    class="menu__title--icon down">

  </span>
</span>
<ul class="menu__list active"
  data-data=/eip/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  













<span class="menu__title--collapse  "
  data-depth="1">
  动态与公告
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list "
  data-data=/news/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  
  
  
  <li>
    <a href="/network/eip/news/prodoct_news/"
      class="menu__title  "
      data-depth="1">产品动态</a>
  </li>
  
  
</ul>


  
  
  
  













<span class="menu__title--collapse  "
  data-depth="1">
  产品简介
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list "
  data-data=/intro/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  
  
  
  <li>
    <a href="/network/eip/intro/introduction/"
      class="menu__title  "
      data-depth="1">什么是公网 IP</a>
  </li>
  
  
</ul>


  
  
  
  













<span class="menu__title--collapse  "
  data-depth="1">
  计费指南
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list "
  data-data=/billing/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  
  
  
  <li>
    <a href="/network/eip/billing/price/"
      class="menu__title  "
      data-depth="1">计费指南</a>
  </li>
  
  
</ul>


  
  
  
  













<span class="menu__title--collapse  "
  data-depth="1">
  快速入门
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list "
  data-data=/quickstart/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  
  
  
  <li>
    <a href="/network/eip/quickstart/ipv6_quick_start/"
      class="menu__title  "
      data-depth="1">搭建 IPv6 网络并开通公网访问</a>
  </li>
  
  
</ul>


  
  
  
  













<span class="menu__title--collapse active "
  data-depth="1">
  操作指南
  <span
    class="menu__title--icon down">

  </span>
</span>
<ul class="menu__list active"
  data-data=/manual/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  













<span class="menu__title--collapse active "
  data-depth="2">
  绑定 IPv4 公网 IP
  <span
    class="menu__title--icon down">

  </span>
</span>
<ul class="menu__list active"
  data-data=/ipv4/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  
  
  
  <li>
    <a href="/network/eip/manual/ipv4/outband_ipv4/"
      class="menu__title  "
      data-depth="2">外部绑定公网 IP</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/eip/manual/ipv4/inband_ipv4/"
      class="menu__title active "
      data-depth="2">内部绑定公网 IP</a>
  </li>
  
  
</ul>


  
  
  
  













<span class="menu__title--collapse  "
  data-depth="2">
  绑定 IPv6 公网 IP
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list "
  data-data=/ipv6/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  
  
  
  <li>
    <a href="/network/eip/manual/ipv6/outband_ipv6/"
      class="menu__title  "
      data-depth="2">外部绑定公网 IP</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/eip/manual/ipv6/inband_ipv6/"
      class="menu__title  "
      data-depth="2">内部绑定公网 IP</a>
  </li>
  
  
</ul>


  
  
  
  
  
  
  <li>
    <a href="/network/eip/manual/ipv6_auto_config/"
      class="menu__title  "
      data-depth="1">开启云服务器 IPv6 自动化配置</a>
  </li>
  
  
</ul>


  
  
  
  













<span class="menu__title--collapse  "
  data-depth="1">
  常见问题
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list "
  data-data=/faq/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  
  
  
  <li>
    <a href="/network/eip/faq/high_ping/"
      class="menu__title  "
      data-depth="1">公网IP网络延迟增大</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/eip/faq/faq/"
      class="menu__title  "
      data-depth="1">连接问题</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/eip/faq/bill_faq/"
      class="menu__title  "
      data-depth="1">费用问题</a>
  </li>
  
  
</ul>


  
  
</ul>


      
      













<span class="menu__title--collapse  display-hide"
  data-depth="0">
  负载均衡
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list  "
  data-data=/loadbalancer/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  













<span class="menu__title--collapse  "
  data-depth="1">
  动态与公告
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list "
  data-data=/news/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  
  
  
  <li>
    <a href="/network/loadbalancer/news/prodoct_news/"
      class="menu__title  "
      data-depth="1">产品动态</a>
  </li>
  
  
</ul>


  
  
  
  













<span class="menu__title--collapse  "
  data-depth="1">
  产品简介
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list  "
  data-data=/intro/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  
  
  
  <li>
    <a href="/network/loadbalancer/intro/introduction/"
      class="menu__title  "
      data-depth="1">什么是负载均衡</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/loadbalancer/intro/advantage/"
      class="menu__title  "
      data-depth="1">产品特性</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/loadbalancer/intro/senario/"
      class="menu__title  "
      data-depth="1">应用场景</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/loadbalancer/intro/limit/"
      class="menu__title  "
      data-depth="1">产品限制</a>
  </li>
  
  
</ul>


  
  
  
  













<span class="menu__title--collapse  "
  data-depth="1">
  计费指南
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list "
  data-data=/billing/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  
  
  
  <li>
    <a href="/network/loadbalancer/billing/price/"
      class="menu__title  "
      data-depth="1">计费指南</a>
  </li>
  
  
</ul>


  
  
  
  













<span class="menu__title--collapse  "
  data-depth="1">
  快速入门
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list "
  data-data=/quickstart/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  
  
  
  <li>
    <a href="/network/loadbalancer/quickstart/quick_start/"
      class="menu__title  "
      data-depth="1">快速入门</a>
  </li>
  
  
</ul>


  
  
  
  













<span class="menu__title--collapse active "
  data-depth="1">
  操作指南
  <span
    class="menu__title--icon down">

  </span>
</span>
<ul class="menu__list active"
  data-data=/manual/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  
  
  
  <li>
    <a href="/network/loadbalancer/manual/lb_user_guide/"
      class="menu__title  "
      data-depth="1">操作指南</a>
  </li>
  
  
</ul>


  
  
  
  













<span class="menu__title--collapse  "
  data-depth="1">
  最佳实践
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list "
  data-data=/best-practices/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  
  
  
  <li>
    <a href="/network/loadbalancer/best-practices/lb_natgw/"
      class="menu__title  "
      data-depth="1">搭建跨越公网的负载均衡</a>
  </li>
  
  
</ul>


  
  
  
  













<span class="menu__title--collapse  "
  data-depth="1">
  常见问题
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list "
  data-data=/faq/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  
  
  
  <li>
    <a href="/network/loadbalancer/faq/after_end_miss/"
      class="menu__title  "
      data-depth="1">负载均衡后端不可用排查方法</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/loadbalancer/faq/lb_502_503_504/"
      class="menu__title  more-space"
      data-depth="1">访问负载均衡器返回502/503/504是什么原因</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/loadbalancer/faq/lb_bind_multi_cert/"
      class="menu__title  "
      data-depth="1">负载均衡器如何支持多证书</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/loadbalancer/faq/http2_enabled_does_not_take_effect/"
      class="menu__title  "
      data-depth="1">开启 HTTP2 不生效</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/loadbalancer/faq/lb_check_session_hold/"
      class="menu__title  more-space"
      data-depth="1">如何检查负载均衡器会话保持是否生效</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/loadbalancer/faq/lb_turn_on_http2/"
      class="menu__title  "
      data-depth="1">如何开启 HTTP2</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/loadbalancer/faq/lb_session_hold/"
      class="menu__title  "
      data-depth="1">LB 会话保持</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/loadbalancer/faq/haproxy_log/"
      class="menu__title  "
      data-depth="1">rsyslog 日志分析</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/loadbalancer/faq/lb_faq/"
      class="menu__title  "
      data-depth="1">常见问题</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/loadbalancer/faq/lb_get_real_ip/"
      class="menu__title  "
      data-depth="1">获取来访者的真实 IP</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/loadbalancer/faq/lb_long_connection/"
      class="menu__title  "
      data-depth="1">开启长连接</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/loadbalancer/faq/http_check_failed/"
      class="menu__title  "
      data-depth="1">七层(HTTP/HTTPS)健康检查异常</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/loadbalancer/faq/tcp_check_fialed/"
      class="menu__title  "
      data-depth="1">四层（TCP/UDP）健康检查出现异常	</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/network/loadbalancer/faq/connection_peer/"
      class="menu__title  more-space"
      data-depth="1">业务日志中出现“Connection reset by peer”的错误</a>
  </li>
  
  
</ul>


  
  
</ul>


      
      













<span class="menu__title--collapse  display-hide"
  data-depth="0">
  边界路由器
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list  "
  data-data=/border_router/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  













<span class="menu__title--collapse  "
  data-depth="1">
  动态与公告
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list "
  data-data=/news/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  
  
  
  <li>
    <a href="/network/border_router/news/prodoct_news/"
      class="menu__title  "
      data-depth="1">产品动态</a>
  </li>
  
  
</ul>


  
  
  
  













<span class="menu__title--collapse  "
  data-depth="1">
  产品简介
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list "
  data-data=/intro/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  
  
  
  <li>
    <a href="/network/border_router/intro/border_router/"
      class="menu__title  "
      data-depth="1">边界路由器</a>
  </li>
  
  
</ul>


  
  
  
  













<span class="menu__title--collapse active "
  data-depth="1">
  操作指南
  <span
    class="menu__title--icon down">

  </span>
</span>
<ul class="menu__list active"
  data-data=/manual/ data-link=/network/eip/manual/ipv4/inband_ipv4/>
  
  
  
  
  
  <li>
    <a href="/network/border_router/manual/border_user_guide/"
      class="menu__title  "
      data-depth="1">操作指南</a>
  </li>
  
  
</ul>


  
  
</ul>


      
    </div>
  </nav>
</div>


<script src="/js/sidebar-tree.js"></script>


          </div>
          <div class="d-none col-md-2 d-xl-block d-md-block col-xl-2 td-toc d-print-none">
            


<h3 class="nav-title">本页目录</h3>


<nav id="TableOfContents">
  <ul>
    <li><a href="#操作场景">操作场景</a></li>
    <li><a href="#操作步骤">操作步骤</a>
      <ul>
        <li><a href="#申请内部绑定的-ipv4-公网-ip">申请内部绑定的 IPv4 公网 IP</a></li>
        <li><a href="#为云服务器绑定公网-ip">为云服务器绑定公网 IP</a></li>
        <li><a href="#linux-云服务器网络配置">Linux 云服务器网络配置</a></li>
        <li><a href="#windows-云服务器网络配置">Windows 云服务器网络配置</a></li>
        <li><a href="#基础网络中云服务器的网络配置">基础网络中云服务器的网络配置</a></li>
        <li><a href="#防火墙设置">防火墙设置</a></li>
      </ul>
    </li>
  </ul>
</nav>




          </div>
          <main class="col-12 col-md-7 col-xl-7" role="main">
            
  

            
            
            
<div class="td-content">
	<div class="td-sidebar-section-title content-index">
		<img class="is-40x40" src="/images/icons/book-open.svg">
		<h3 class="doc_vice_title">绑定 IPv4 公网 IP</h3>
		<a href="javascript:;" class="nav-trigger">&nbsp;<span aria-hidden="true"></span></a>
	</div>
	<div class="td-page-top">
		<h1>内部绑定公网 IP</h1>
		






<div class="td-page-meta page-meta-actions ml-2 pb-1 mb-0">







</div>



	</div>
	<div class="page-meta-lastmod text-muted ">
	更新时间 2020-12-01

</div>

	<input type="hidden" id="content_console" value="1">
	
	
	<div class="lead"></div>
	

	
	<h2 id="操作场景">操作场景</h2>
<p>内部绑定是指通过在云服务器内部添加一块可连接到公网网关的网卡的方式来绑定公网IP。</p>
<p>需要先申请一个内部绑定的公网 IP 并分配给云服务器，然后手动配置网卡 IP 地址及相关路由，以实现云服务器的公网访问。</p>
<blockquote>
<p><strong>说明</strong>：</p>
<p>目前内部绑定仅允许绑定到云服务器，不允许绑定到路由器与负载均衡器。</p>
</blockquote>
<h2 id="操作步骤">操作步骤</h2>
<h3 id="申请内部绑定的-ipv4-公网-ip">申请内部绑定的 IPv4 公网 IP</h3>
<ol>
<li>
<p>登录 WEB 控制台，在顶部菜单栏中点击<strong>产品与服务</strong>，选择 <strong>网络</strong> &gt; <strong>公网 IP</strong> 。</p>
</li>
<li>
<p>在<strong>公网 IPv4</strong> 页面，点击<strong>申请</strong>。</p>
</li>
<li>
<p>填写公网 IP 信息。</p>
<img src="../../../_images/allocate_inbind_eip.png" alt="内部绑定公网IP" style="zoom:70%;" />
<ul>
<li>
<p>名称：为您申请的 IP 地址取个名字，方便记忆与使用。可选。</p>
</li>
<li>
<p>模式：计费模式，可以选择<strong>按带宽计费</strong>或<strong>按流量计费</strong>。</p>
</li>
<li>
<p>IP 组：使用默认设置。</p>
</li>
<li>
<p>带宽上限：输入所需要的互联网带宽。</p>
</li>
<li>
<p>绑定方式：选择<strong>内部绑定</strong>。</p>
<!--备案： ICP 备案。若您打算做公开的网站，在中国大陆需要备案。-->
</li>
<li>
<p>数量：输入所需要的 IP 个数。</p>
</li>
</ul>
<blockquote>
<p><strong>说明</strong>：</p>
<p>带宽上限是指云服务器互联网访问的带宽，云服务器与云服务器之间的内网带宽与云服务器规格有关，云服务器规格越高，内网带宽越高，详情请参阅 <a href="/compute/vm/intro/instance/">云服务器</a>。</p>
<!--若您在表单中标示了需要 ICP 备案， 那么您申请到的公网 IP 不能立刻投入使用，需要完成政府备案后才可以使用； 若您在表单中标示了不需要 ICP 备案，那么您申请到的公网 IP 可以立刻开始使用。-->
</blockquote>
</li>
</ol>
<h3 id="为云服务器绑定公网-ip">为云服务器绑定公网 IP</h3>
<ol>
<li>
<p>右键点击刚刚申请到的的 IPv4公网 IP， 选择<strong>分配到云服务器</strong> ，在弹出的对话框中选择需要绑定的云服务器。</p>
<img src="../../../_images/already_eip_for_host2.png" alt="绑定公网IP至云服务器" style="zoom:60%;" />
</li>
<li>
<p>点击<strong>提交</strong>即可将申请到的公网 IP 绑定给相应云服务器。</p>
<blockquote>
<p><strong>说明</strong>：</p>
<p>内部绑定的公网 IP 目前只允许绑定到主网卡，并且不能与其他绑定到主网卡的公网 IP 同时存在。</p>
</blockquote>
</li>
</ol>
<h3 id="linux-云服务器网络配置">Linux 云服务器网络配置</h3>
<p>将公网 IP 分配到云服务器后可以看到云服务器内多出一块还未分配 IP 地址的公网网卡。如下图所示，此时云服务器中一共有两块网卡，其中 eth0 为主网卡， IP 地址为 192.168.0.2 ； eth1 为刚刚绑定的公网网卡。</p>
<p><img src="../../../_images/inbind_eip_nic.png" alt="绑定公网IP至网卡"></p>
<p>在以内部绑定方式绑定公网 IP 后，还需要手动为云服务器内的公网网卡进行网络配置，主要包括 IP 地址配置及路由配置。这里仅以 Ubuntu 为例来进行说明，其他系统的配置原理与此类似。</p>
<h4 id="网络地址配置">网络地址配置</h4>
<p>假设刚才绑定的公网 IP 地址为 202.120.111.159 ，在配置文件 /etc/network/interfaces 中添加如下配置来将公网 IP 地址分配到 eth1 ：</p>
<pre tabindex="0"><code>auto eth1
iface eth1 inet static
  address 202.120.111.159
  netmask 255.255.255.0
</code></pre><p>将配置文件保存之后，使用如下命令将配置应用到网卡 eth1 ：</p>
<pre tabindex="0"><code>#sudo ifup eth1
</code></pre><blockquote>
<p><strong>说明</strong>：</p>
<p>如果云服务器中运行了NetworkManager服务，需要在进行上述配置后重启NetworkManager服务，以避免 eth1 的网络配置被擦除。</p>
</blockquote>
<h4 id="路由配置">路由配置</h4>
<p>为了让 eth1 可以正常访问公网，还需要进行路由配置。同样在配置文件 /etc/network/interfaces 中添加路由信息，使用 eth1 的网关做为默认路由，网关地址通常为该网段的第一个 IP 地址，添加路由信息后的完整配置如下：</p>
<pre tabindex="0"><code>auto eth1
iface eth1 inet static
  address 202.120.111.159
  netmask 255.255.255.0
  post-up ip route replace default via 202.120.111.1 dev eth1
</code></pre><p>此时在云服务器中可以访问公网，但是对私有网络及基础网络的访问会出现问题，因此还需要在 eth0 上配置到私有网络及基础网络的路由。</p>
<p>系统中的基础网络地址为 10.0.0.0/8 ，并且假设用户创建的 VPC 网络地址为 192.168.0.0/16 。在配置文件中添加如下配置，将对这些网络的访问的下一跳设置成 eth0 所在网络的网关（默认 IP 地址为 192.168.0.1 ）：</p>
<pre tabindex="0"><code>auto eth0
iface eth0 inet dhcp
  post-up ip route replace 192.168.0.0/16 via 192.168.0.1 dev eth0
  post-up ip route replace 10.0.0.0/8 via 192.168.0.1 dev eth0
</code></pre><blockquote>
<p><strong>说明</strong>：</p>
<p>如需在 Ubuntu Server 16.04.2 LTS 版本中进行网络配置，还需要在 /etc/network/interfaces 文件中将以下语句进行注释:<code> source /etc/network/interfaces.d/*</code>。</p>
</blockquote>
<h4 id="内网-dns-路由配置">内网 DNS 路由配置</h4>
<p>为了访问内网域名地址，需要再添加一条内网 DNS 的路由信息。内网 DNS 服务器的 IP 地址可以在 /etc/resolv.conf 文件中查看，其中以 100 开头的 IP 地址为内网的 DNS 服务器地址，如下图所示：</p>
<p><img src="../../../_images/inbind_dns.png" alt="DNS配置"></p>
<p>假设 DNS 服务器地址为 100.3.3.3 ，将该 IP 地址的路由信息添加到 eth0 网卡对应的配置信息下，如下所示：</p>
<pre tabindex="0"><code>post-up ip route replace 100.3.3.3/32 via 192.168.0.1 dev eth0
</code></pre><h4 id="公网-ip-切换绑定">公网 IP 切换绑定</h4>
<p>公网 IP 切换绑定功能适用于绑定已经处于绑定状态的公网 IP 到新的虚拟机上。工作原理是: 从源节点上解绑公网 IP，同时在目标节点上进行绑定。</p>
<p>公网 IP 绑定功能可以使用在高可用环境中。一旦绑定公网 IP 的主节点出现宕机或者服务无法使用，可以在从节点中发起切换绑定的请求，这样从节点上会绑定之前主节点使用的公网 IP 。这样的使用可以保证服务不宕机。具体的 api 使用方法可以参考 <a href="/development_docs/api/command_list/eip/associate_eip/"><em>AssociateEip</em></a>。</p>
<ol>
<li>
<p>在同一个 VPC 中创建两台虚拟机, VPC 绑定公网 IP A, 另外对外服务的虚拟机绑定公网 IP B。在防火墙中放行 VRRP 协议。</p>
</li>
<li>
<p>虚拟机上安装配置 keepalived。</p>
<p>以 keepalived 1.3.9 版本为例：</p>
<p>主节点配置如下：</p>
<p><img src="../../../_images/keepalived_master.png" alt="管理节点配置"></p>
<p>从节点配置如下：</p>
<p><img src="../../../_images/keepalived_backup.png" alt="从节点配置"></p>
<p>同时运行之后, EIP B 会绑定在主节点上。可到 console 页面查看。</p>
</li>
<li>
<p>关闭主节点的 keepalived 服务，触发主备切换，此时公网 EIP B 会绑定到新的主节点上。</p>
<p><img src="../../../_images/keepalived_switch.png" alt="公网IP自动切换"></p>
</li>
</ol>
<h3 id="windows-云服务器网络配置">Windows 云服务器网络配置</h3>
<p>这里仍然假设绑定的公网 IP 地址为 202.120.111.159 ，网关为 202.120.111.1 ； 用户创建的 VPC 网络地址为 192.168.0.0/16 ，云服务器在私有网络中的 IP 地址为 192.168.0.2 ，网关为 192.168.0.1 。以 Windows Server 2016 为例来说明网络配置的步骤。</p>
<h4 id="网络地址配置-1">网络地址配置</h4>
<p>为新加入的公网网卡配置 IP 地址，如下图所示。其中，只需要配置 IP 地址及子网掩码，不需要配置网关地址， DNS 地址也可不填。在配置完成后，点击确认保存。</p>
<p><img src="../../../_images/inbind_windows_ip.png" alt=""></p>
<h4 id="路由配置-1">路由配置</h4>
<p>打开 Windows 命令行终端进行路由配置。首先使用 route 命令查看网卡的编号：</p>
<pre tabindex="0"><code>route print -4
</code></pre><p>输出结果如下图所示，其中第一行与第二行分别为私有网络的网络连接与公网的网络连接，每行的第一个数字为网卡的编号。在本示例中，私有网络的网卡编号为 4 ，公网的网卡编号为 6 。</p>
<p><img src="../../../_images/inbind_windows_if.png" alt="绑定信息查看"></p>
<p>使用如下命令添加路由信息，使用公网网卡的网关做为默认路由，其中 if 指定的参数为公网网卡编号 6 ：</p>
<pre tabindex="0"><code>route -p add 0.0.0.0 mask 0.0.0.0 202.120.111.1 metric 1 if 6
</code></pre><p>使用如下命令添加私有网络及基础网络的路由信息，其中 if 指定为私有网络的网卡编号 4 ：</p>
<pre tabindex="0"><code>route -p add 192.168.0.0 mask 255.255.0.0 192.168.0.1 metric 1 if 4
route -p add 10.0.0.0 mask 255.0.0.0 192.168.0.1 metric 1 if 4
</code></pre><p>最后需要修改私有网络默认路由的优先级，以保证对于公网的访问使用公网网卡的默认路由：</p>
<pre tabindex="0"><code>route -p change 0.0.0.0 mask 0.0.0.0 192.168.0.1 metric 100 if 4
</code></pre><p>在配置完成后使用 route print -4 查看完整的路由信息，如下图所示：</p>
<p><img src="../../../_images/inbind_windows_route.png" alt="查看路由信息"></p>
<h4 id="内网-dns-路由配置-1">内网 DNS 路由配置</h4>
<p>首先在网卡详细信息页面中查看 DNS 服务器的 IP 地址，如下图所示，其中以 100 开头的 IP 地址为内网的 DNS 服务器地址：</p>
<p><img src="../../../_images/inbind_windows_dns.png" alt="内网DNS"></p>
<p>假设 DNS 服务器地址为 100.3.3.3 ，添加路由信息，指定 if 为私有网络的网卡编号 4 ：</p>
<pre tabindex="0"><code>route -p add 100.3.3.3 mask 255.255.255.255 192.168.0.1 metric 1 if 4
</code></pre><h3 id="基础网络中云服务器的网络配置">基础网络中云服务器的网络配置</h3>
<p>以上示例中假设用户云服务器加入到了 VPC 网络，并以 192.168.0.1 做为访问内网资源的网关。如果用户云服务器加入的是基础网络，则需要将上述配置中的 192.168.0.1 修改为基础网络的网关地址，网关地址通常为该网段的第一个 IP 地址。</p>
<p>例如用户云服务器加入基础网络后的 IP 地址为 10.140.10.15 ，则网关地址为 10.140.10.1 ，并以此 IP 地址做为访问内网资源的网关地址来进行网络配置。</p>
<h3 id="防火墙设置">防火墙设置</h3>
<p>由于内部绑定的公网 IP 是绑定到云服务器的主网卡上，因此对主网卡应用的防火墙规则都会被应用到公网网卡。当删除主网卡的防火墙时，公网网卡的防火墙也会被同时删除。</p>

	
	
	<div class="page-meta-pagination border-top">
		
		<a href="/network/eip/manual/ipv4/outband_ipv4/" class="prev pl1" title="外部绑定公网 IP ">
			上一页: 外部绑定公网 IP
		</a>
		

		
	</div>
	<div class="page-meta-pagination_word">
		这篇文档解决了您的问题吗？
		<div class="doc_fix_click fix-background-like" data-flag='1'>
			<span>0</span>
		</div>
		<div class="doc_fix_click fix-background-unlike" data-flag='0'>
			<span>0</span>
		</div>
		<input type="hidden" id="doc_fix_flag" value="0">
	</div>
</div>
<script src="/js/content.js"></script>
<script src="/js/viewer.min.js"></script>
<link rel="stylesheet" href="/css/viewer.min.css">
<script>
	var viewer = new Viewer(document.querySelector('.td-content'), {
		url: 'src'
	})
</script>

          </main>
        </div>
      </div>
    </div>
         
    
<script src="/css/bootstrap.min.js"></script>
<script src="/js/autocomplete/jquery.autocomplete.js"></script>
<script src="/js/navbar.js"></script>
<script src="/js/copy-to-clipboard.js"></script>
</script>






<script src="/js/main.min.7d5b92c4889cf0554b0ea5e2309b0b81b196aa7c9a235632938a25d9fc4d8a7c.js" integrity="sha256-fVuSxIic8FVLDqXiMJsLgbGWqnyaI1Yyk4ol2fxNinw=" crossorigin="anonymous"></script>



  </body>
</html>