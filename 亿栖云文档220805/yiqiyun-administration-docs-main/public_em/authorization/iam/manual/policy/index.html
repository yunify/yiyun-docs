<!doctype html>
<html lang="zh" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta name="generator" content="Hugo 0.101.0" />

<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">



<link rel="icon" href="http://yiqiyun.sd.cegn.cn/static/assets/images/favicon.ico?v=1632342842" type="image/x-icon">

<title>策略管理 | 亿栖云文档</title>

<link href="/css/bulma.css" rel="stylesheet">
<link href="/css/autocomplete.css" rel="stylesheet" />
<link href="/css/copy-to-clipboard.css" rel="stylesheet" />


    



<link rel="preload" href="/scss/console.min.3968935d0a1c8815d0609e047c8c7bddc7781a37538ed1b0cc049f82a7c994c1.css" as="style">
<link href="/scss/console.min.3968935d0a1c8815d0609e047c8c7bddc7781a37538ed1b0cc049f82a7c994c1.css" rel="stylesheet" integrity="">


<script
  src="/js/jquery-2.2.4.js?v=1510299508"
  ></script>
	

<script src="/js/common.js?v=1.3"></script>

  </head>
  <body class="td-page">
    <header>
      <div class="nav-wrapper ">
  <nav class="navbar navmenu"  style="display:none;" >
    <div class="container with-no-position doc-container-width ">
      <div class="navbar-brand" id="search-mobile-logo">
        <a class="navbar-item logo" href="http://www.yiqiyun.net.cn">
          <img src="/images/yiqiyun_logo.png" alt="logo" style="height: 32px;width: 120px;">
        </a>
      </div>
      <div class="media-content column is-centered is-5 search-mobile">
        <form action="/search" method="GET">
          <div class="control has-icons-right docs-search-input">
            <input class="input" id="search-bar" name="q" type="search" placeholder="搜索" autocomplete="off">
            <span class="icon is-right" id="mobile-search">
              <img src="/images/icons/search.svg">
            </span>
          </div>
        </form>
        <a href="javascript:;" class="search-mobile-icon"><img src="/images/icons/search.svg"></a>
      </div>
      <div class="navbar-end is-hidden-mobile header-account">
        <div class="navbar-item">
          <div class="field is-grouped">
            <p class="control navbar-user">
              <a class="nav-item" href="http://www.yiqiyun.cn">服务商门户</a>
            </p>
            <p class="control navbar-user">
              <a class="nav-item" href="http://console.yiqiyun.cn/login">登录</a>
            </p>
            <div class="navbar-user">
              <a class="button is-primary j-signup" href="http://console.yiqiyun.cn/signup/" data-gio="{id:'createPageView',var:{sourceType_var:'导航栏'}}" style="background-color: #55a8fd">注册</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </nav>
  
  <nav class="navbar navmenu navbar-index">
    <div class="container is-size-7 doc-container-width " data-path="1">


	
	
		

  
  

  
  

  
  

  


	
	




  


	
	
	<a href="/authorization/iam/" class="has-text-primary">访问鉴权管理</a><img class="container_span_space" src="/images/icons/path.svg">
	




  


	
	
	<a href="" class="has-text-primary">操作指南</a><img class="container_span_space" src="/images/icons/path.svg">
	




  



	
	<span class="crumb-last-color">策略管理</span>
	



	

</div>


  </nav>
  
</div>
    </header>
    <div class="container td-outer doc-container-width container-min-height">
      <div class="td-main">
		
			<h1 class="console-tree-title">操作指南</h1>
		
        <div class="row flex-xl-nowrap">
		  
          <div class="col-12 col-md-3 col-xl-3 td-sidebar d-print-none td-sidebar-menu">
            





<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <nav class="collapse td-sidebar-nav pt-2" id="td-section-nav">
    <div class="nav-item dropdown d-block ">
      
      
      













<span class="menu__title--collapse active display-hide"
  data-depth="0">
  访问鉴权管理
  <span
    class="menu__title--icon down">

  </span>
</span>
<ul class="menu__list active"
  data-data=/iam/ data-link=/authorization/iam/manual/policy/>
  
  
  













<span class="menu__title--collapse  "
  data-depth="1">
  动态与公告
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list "
  data-data=/news/ data-link=/authorization/iam/manual/policy/>
  
  
  
  
  
  <li>
    <a href="/authorization/iam/news/product_news/"
      class="menu__title  "
      data-depth="1">产品动态</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/authorization/iam/news/iam_v1/"
      class="menu__title  "
      data-depth="1">IAM V1.0 版发布概要</a>
  </li>
  
  
</ul>


  
  
  
  













<span class="menu__title--collapse  "
  data-depth="1">
  产品简介
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list "
  data-data=/introduction/ data-link=/authorization/iam/manual/policy/>
  
  
  
  
  
  <li>
    <a href="/authorization/iam/introduction/product_features/"
      class="menu__title  "
      data-depth="1">概述</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/authorization/iam/introduction/glossary/"
      class="menu__title  "
      data-depth="1">名词解释</a>
  </li>
  
  
</ul>


  
  
  
  













<span class="menu__title--collapse active "
  data-depth="1">
  操作指南
  <span
    class="menu__title--icon down">

  </span>
</span>
<ul class="menu__list active"
  data-data=/manual/ data-link=/authorization/iam/manual/policy/>
  
  
  
  
  
  <li>
    <a href="/authorization/iam/manual/portal/"
      class="menu__title  "
      data-depth="1">产品入口</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/authorization/iam/manual/role/"
      class="menu__title  "
      data-depth="1">身份管理</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/authorization/iam/manual/policy/"
      class="menu__title active "
      data-depth="1">策略管理</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/authorization/iam/manual/policies_simulate/"
      class="menu__title  "
      data-depth="1">策略模拟器</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/authorization/iam/manual/log/"
      class="menu__title  "
      data-depth="1">操作日志</a>
  </li>
  
  
</ul>


  
  
  
  













<span class="menu__title--collapse  "
  data-depth="1">
  常见问题
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list "
  data-data=/faq/ data-link=/authorization/iam/manual/policy/>
  
  
  
  
  
  <li>
    <a href="/authorization/iam/faq/principal/"
      class="menu__title  "
      data-depth="1">信任载体</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/authorization/iam/faq/qrn/"
      class="menu__title  "
      data-depth="1">资源标识符 QRN</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/authorization/iam/faq/json/"
      class="menu__title  "
      data-depth="1">JSON 编辑格式及参数说明</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/authorization/iam/faq/supported_services/"
      class="menu__title  "
      data-depth="1">支持的服务类别列表</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/authorization/iam/faq/assume_role/"
      class="menu__title  "
      data-depth="1">如何使用身份</a>
  </li>
  
  
</ul>


  
  
  
  













<span class="menu__title--collapse  "
  data-depth="1">
  最佳实践
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list "
  data-data=/best-practices/ data-link=/authorization/iam/manual/policy/>
  
  
  
  
  
  <li>
    <a href="/authorization/iam/best-practices/scenario1/"
      class="menu__title  "
      data-depth="1">免密钥应用开发</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/authorization/iam/best-practices/scenario2/"
      class="menu__title  "
      data-depth="1">跨账号管理协作</a>
  </li>
  
  
</ul>


  
  
</ul>


      
      













<span class="menu__title--collapse  display-hide"
  data-depth="0">
  账户中心
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list  "
  data-data=/account/ data-link=/authorization/iam/manual/policy/>
  
  
  













<span class="menu__title--collapse  "
  data-depth="1">
  动态与公告
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list "
  data-data=/news/ data-link=/authorization/iam/manual/policy/>
  
  
  
  
  
  <li>
    <a href="/authorization/account/news/prodoct_news/"
      class="menu__title  "
      data-depth="1">产品动态</a>
  </li>
  
  
</ul>


  
  
  
  













<span class="menu__title--collapse  "
  data-depth="1">
  产品简介
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list "
  data-data=/intro/ data-link=/authorization/iam/manual/policy/>
  
  
  
  
  
  <li>
    <a href="/authorization/account/intro/introduction/"
      class="menu__title  "
      data-depth="1">什么是账户中心</a>
  </li>
  
  
</ul>


  
  
  
  













<span class="menu__title--collapse active "
  data-depth="1">
  操作指南
  <span
    class="menu__title--icon down">

  </span>
</span>
<ul class="menu__list active"
  data-data=/manual/ data-link=/authorization/iam/manual/policy/>
  
  
  
  
  
  <li>
    <a href="/authorization/account/manual/user_verify/"
      class="menu__title  "
      data-depth="1">账号认证</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/authorization/account/manual/user_security/"
      class="menu__title  "
      data-depth="1">账号安全指南</a>
  </li>
  
  
  
  
  
  
  <li>
    <a href="/authorization/account/manual/indep_quota/"
      class="menu__title  "
      data-depth="1">子账号配额管理</a>
  </li>
  
  
</ul>


  
  
  
  













<span class="menu__title--collapse  "
  data-depth="1">
  常见问题
  <span
    class="menu__title--icon right">

  </span>
</span>
<ul class="menu__list "
  data-data=/faq/ data-link=/authorization/iam/manual/policy/>
  
  
  
  
  
  <li>
    <a href="/authorization/account/faq/faq/"
      class="menu__title  "
      data-depth="1">账户注册问题</a>
  </li>
  
  
</ul>


  
  
</ul>


      
    </div>
  </nav>
</div>


<script src="/js/sidebar-tree.js"></script>


          </div>
          <div class="d-none col-md-2 d-xl-block d-md-block col-xl-2 td-toc d-print-none">
            


<h3 class="nav-title">本页目录</h3>


<nav id="TableOfContents">
  <ul>
    <li><a href="#策略类型">策略类型</a></li>
    <li><a href="#创建自定义策略">创建自定义策略</a>
      <ul>
        <li><a href="#可视化创建">可视化创建</a></li>
        <li><a href="#json-编辑">JSON 编辑</a></li>
      </ul>
    </li>
    <li><a href="#查看策略摘要">查看策略摘要</a></li>
    <li><a href="#为策略引用离开身份">为策略引用（/离开）身份</a></li>
    <li><a href="#管理策略版本">管理策略版本</a>
      <ul>
        <li><a href="#版本生成">版本生成</a></li>
        <li><a href="#版本管理">版本管理</a></li>
      </ul>
    </li>
    <li><a href="#删除策略">删除策略</a></li>
  </ul>
</nav>




          </div>
          <main class="col-12 col-md-7 col-xl-7" role="main">
            
  

            
            
            
<div class="td-content">
	<div class="td-sidebar-section-title content-index">
		<img class="is-40x40" src="/images/icons/book-open.svg">
		<h3 class="doc_vice_title">操作指南</h3>
		<a href="javascript:;" class="nav-trigger">&nbsp;<span aria-hidden="true"></span></a>
	</div>
	<div class="td-page-top">
		<h1>策略管理</h1>
		






<div class="td-page-meta page-meta-actions ml-2 pb-1 mb-0">







</div>



	</div>
	<div class="page-meta-lastmod text-muted ">
	更新时间 2020-12-01

</div>

	<input type="hidden" id="content_console" value="1">
	
	
	
	

	
	<p>您可以通过 IAM 策略定义一系列服务或资源的访问权限范围，然后将其引用到指定的身份上。当 IAM 身份附加了某条策略，则代表该身份具备此策略所定义的权限，并将会在身份使用时根据权限定义启动策略评估。</p>
<blockquote>
<p><strong>说明</strong></p>
<p>策略评估时<strong>多条策略叠加取并集</strong>，并<strong>默认拒绝</strong>未定义任何权限的操作；</p>
<p>若叠加的策略中针对同一操作定义了不同结论，则<strong>拒绝优先</strong>。</p>
</blockquote>
<p>当您对策略叠加的预期评估结论产生疑问时，您可以使用<a href="../../manual/policies_simulate">策略模拟器</a>获得准确的测试结论。</p>
<h2 id="策略类型">策略类型</h2>
<p>策略分为预置策略、自定义策略和应用托管托管策略。您可以点击策略列表类型列的下拉选择筛选定位到相应的策略类型。</p>
<p><img src="../../_images/policy01.png" alt="policy01"></p>
<blockquote>
<p><strong>说明</strong></p>
<p><strong>预置策略</strong>是云平台为满足您的日常管理需要而提供，无法删除和更改；</p>
<p><strong>应用托管策略</strong>是由 AppCenter 应用开发者定义，您在部署相应应用时即自动生成，也是无法自主删除和更改的。</p>
</blockquote>
<p>只有<strong>自定义策略</strong>支持删除和更改。</p>
<p><img src="../../_images/policy3.png" alt="图片"></p>
<h2 id="创建自定义策略">创建自定义策略</h2>
<p>控制台为自定义策略提供了<strong>可视化</strong>创建和<strong>JSON编辑</strong>两种创建方式。当您点击“创建”按钮后，将默认引导可视化策略创建。</p>
<h3 id="可视化创建">可视化创建</h3>
<ol>
<li>
<p>点击 <strong>添加服务类别</strong>，选择需要加入策略的服务。</p>
<p><img src="../../_images/policy4.png" alt="图片"></p>
<p>例如：“弹性云服务器”，页面将按只读、维护和敏感分类列出该服务下的所有操作。您也可以点击 <strong>显示操作名称</strong> 切换到 <strong>显示 API 指令</strong> 的方式查看这些操作明细。</p>
<p><img src="../../_images/policy5.png" alt="图片"></p>
</li>
<li>
<p>展开操作分类后，勾选需要加入到策略的操作即可为这些操作设置“允许”权限。</p>
<p><img src="../../_images/policya1.png" alt="图片"></p>
<p>如果需要为被勾选的操作赋予拒绝权限，则点击“切换以拒绝权限”按钮：</p>
<p><img src="../../_images/policy7.png" alt="图片"></p>
<p>您可以在勾选操作前通过操作名称或 API 关键字搜索操作，页面将实时展示符合条件的操作列表。如下图所示：</p>
<p><img src="../../_images/policy8.png" alt="图片"></p>
</li>
<li>
<p>选择操作后，页面将指引您为选择的操作设定权限作用范围，默认是作用于“全部资源”，如需将权限范围圈定到部分特定资源上，点选“特定资源”按钮并配置<a href="../../faq/qrn">资源标识符 QRN</a> 即可。IAM 会根据您所选的操作自动关联出操作所需的所有资源，如下图：</p>
<p><img src="../../_images/policya2.png" alt="图片"></p>
<blockquote>
<p><strong>说明</strong></p>
<p>当选择“特定资源”作为权限范围时，您必须为必选（前面标有*的资源）类型指定 <a href="../../faq/qrn">QRN</a>，上图的“云服务器”即为必选类型。您可以使用 <a href="../../faq/qrn#qrn%E7%94%9F%E6%88%90%E5%99%A8">QRN 生成器</a> 来指定相应的资源。</p>
</blockquote>
</li>
<li>
<p>由于策略可以是多个相同或不同服务类别的不同权限集合，您可通过再次点击“添加服务类别”按钮并循环前面的操作以将一系列不同的权限集合在一起。</p>
</li>
<li>
<p>确认内容创建无误后可以点击“下一步”按钮以进入策略审阅界面。填写自定义策略的名称和描述后点击“创建”即可创建成功。</p>
<p><img src="../../_images/policya3.png" alt="图片"></p>
</li>
<li>
<p>创建成功后，页面出现提示弹框，可根据指引点击进入策略模拟器或者策略详情页。</p>
<p><img src="../../_images/policy10.png" alt="图片"></p>
</li>
</ol>
<h3 id="json-编辑">JSON 编辑</h3>
<p>策略是由 JSON 格式创建的配置文件：<a href="../../faq/json">策略 JSON 编辑格式及参数说明</a>。</p>
<p>如果您对策略有更灵活的要求，则可以在策略创建过程中随时点击“JSON 编辑”按钮切换到配置文件编辑模式。如下图所示：</p>
<p><img src="../../_images/policya4.png" alt="图片"></p>
<p>切换到配置文件编辑模式后，系统会自动将已可视化编辑的配置实时显示其中，您可以直接在该基础上编辑：</p>
<p><img src="../../_images/policya5.png" alt="图片"></p>
<blockquote>
<p><strong>说明</strong></p>
<p>当您自行使用 JSON 编辑来创建策略时，需要满足云平台的格式规则，否则可能会创建失败或者偏离预期的策略效果。</p>
<p>JSON 编辑规则请参阅：<a href="../../faq/json">JSON 编辑格式及参数说明</a>。</p>
</blockquote>
<p>确认内容编辑无误后可以点击“下一步”按钮以进入策略审阅界面，填写自定义策略的名称和描述后点击“创建”即可创建成功。</p>
<p><img src="../../_images/policya3.png" alt="图片"></p>
<h2 id="查看策略摘要">查看策略摘要</h2>
<p>您可以在策略列表页点击策略 ID 进入该策略详情页，下方将自动显示该策略的摘要信息：</p>
<p><img src="../../_images/policy11.png" alt="图片"></p>
<p>策略内容支持切换到 JSON 源码查看：</p>
<p><img src="../../_images/policy12.png" alt="图片"></p>
<p>非预置策略（即自定义策略）可再次修改，点击<strong>修改策略</strong>，跳转到策略修改页面。修改后将创建一个新的策略版本。</p>
<p><img src="../../_images/policy014.png" alt="policy014"></p>
<h2 id="为策略引用离开身份">为策略引用（/离开）身份</h2>
<p>策略是一系列操作权限的集合，将其引用到身份即可控制该身份访问云平台的接入。一个身份上可以附加多条策略，一个策略也可引用到多个身份。 IAM 支持针对策略操作一次性引用到多个身份。</p>
<ul>
<li>
<p>策略列表页鼠标右键单击，选择“身份”。</p>
<p><img src="../../_images/policy16.png" alt="图片"></p>
</li>
<li>
<p>或勾选策略后，点击 <strong>更多操作</strong> &gt; <strong>引用到</strong> &gt; <strong>引用到身份</strong>。</p>
<p><img src="../../_images/policy15.png" alt="图片"></p>
</li>
<li>
<p>也可以在策略详情页，点击 <strong>引用</strong> &gt; <strong>+新引用</strong>。页面出现策略引用弹窗，选择需要引用的身份并确认。</p>
<p><img src="../../_images/policy17.png" alt="图片"></p>
<p><img src="../../_images/policy18.png" alt="图片"></p>
</li>
</ul>
<p>相应的，若需离开某个或某些身份，直接页面上选择<strong>离开</strong>并确认即可。</p>
<h2 id="管理策略版本">管理策略版本</h2>
<h3 id="版本生成">版本生成</h3>
<p>每一次的策略内容修改更新，都将会自动生成一个策略版本。</p>
<ol>
<li>
<p>进入自定义策略详情的权限摘要查看处，点击<strong>修改策略</strong>。</p>
<p><img src="../../_images/pv1.png" alt="图片"></p>
</li>
<li>
<p>与创建策略一样，修改策略时也支持通过可视化和  JSON 格式编辑。</p>
<p><img src="../../_images/pv2.png" alt="图片"></p>
</li>
<li>
<p>确认修改策略后，点击<strong>保存</strong>即可自动为当前策略生成一个新版本。</p>
</li>
</ol>
<blockquote>
<p><strong>说明</strong></p>
<p>最多可保存 10 个策略版本。</p>
<p>若您已存在 10 个策略版本，再次修改时我们会提示您删除早期的版本。</p>
</blockquote>
<h3 id="版本管理">版本管理</h3>
<p>进入自定义策略详情页，点击“版本管理”标签，默认将对比展示该策略的当前版本和最近的历史版本。</p>
<ul>
<li>
<p>我们将会把两个版本对比中的不同之处高亮显示：</p>
<p><img src="../../_images/pv5.png" alt="图片"></p>
</li>
</ul>
<blockquote>
<p><strong>说明</strong></p>
<p>若您尚未修改过这条自定义策略（只有一个版本），将只会展示当前版本。</p>
</blockquote>
<ul>
<li>
<p>您可以在众多的历史版本中点击切换，以展示该历史版本与当前版本的内容对比。</p>
<p><img src="../../_images/pv3.png" alt="图片"></p>
</li>
<li>
<p>您还可以在对比查看后直接“应用此版本”或“删除”：</p>
<p><img src="../../_images/pv4.png" alt="图片"></p>
</li>
</ul>
<blockquote>
<p><strong>说明</strong></p>
<p>当您修改某条策略或为该策略应用历史版本后，所有该策略引用对象的权限将被更新。</p>
<p>若您准备操作的这条策略已被引用，请注意谨慎操作。</p>
</blockquote>
<h2 id="删除策略">删除策略</h2>
<ul>
<li>
<p>策略列表页，勾选需要删除的自定义策略，在上方功能区点击 <strong>更多操作</strong> &gt; <strong>删除</strong>。</p>
<p><img src="../../_images/policy19.png" alt="图片"></p>
</li>
<li>
<p>或在列表中相应的策略条目上点击鼠标右键选择 <strong>删除</strong>。</p>
<p><img src="../../_images/policy20.png" alt="图片"></p>
</li>
<li>
<p>或进入相应的策略详情，点击右上角更多操作选择 <strong>删除</strong>，在弹出的确认窗口阅读提示信息确认后即可操作策略删除。</p>
<p><img src="../../_images/policy21.png" alt="图片"></p>
</li>
</ul>
<blockquote>
<p><strong>说明</strong></p>
<p>为了保证您的数据安全，当您准备删除的策略已被引用，操作时会被系统拒绝。</p>
</blockquote>
<p>当您选择批量删除多条自定义策略时，确认后只会删除被选策略中的无任何引用的策略条目。</p>
<p><img src="../../_images/policya7.png" alt="图片"></p>

	
	
	<div class="page-meta-pagination border-top">
		
		<a href="/authorization/iam/manual/role/" class="prev pl1" title="身份管理 ">
			上一页: 身份管理
		</a>
		

		
		<a href="/authorization/iam/manual/policies_simulate/" class="next pr1" title="策略模拟器">
			下一页: 策略模拟器
		</a>
		
	</div>
	<div class="page-meta-pagination_word">
		这篇文档解决了您的问题吗？
		<div class="doc_fix_click fix-background-like" data-flag='1'>
			<span>0</span>
		</div>
		<div class="doc_fix_click fix-background-unlike" data-flag='0'>
			<span>0</span>
		</div>
		<input type="hidden" id="doc_fix_flag" value="0">
	</div>
</div>
<script src="/js/content.js"></script>
<script src="/js/viewer.min.js"></script>
<link rel="stylesheet" href="/css/viewer.min.css">
<script>
	var viewer = new Viewer(document.querySelector('.td-content'), {
		url: 'src'
	})
</script>

          </main>
        </div>
      </div>
    </div>
         
    
<script src="/css/bootstrap.min.js"></script>
<script src="/js/autocomplete/jquery.autocomplete.js"></script>
<script src="/js/navbar.js"></script>
<script src="/js/copy-to-clipboard.js"></script>
</script>






<script src="/js/main.min.7d5b92c4889cf0554b0ea5e2309b0b81b196aa7c9a235632938a25d9fc4d8a7c.js" integrity="sha256-fVuSxIic8FVLDqXiMJsLgbGWqnyaI1Yyk4ol2fxNinw=" crossorigin="anonymous"></script>



  </body>
</html>